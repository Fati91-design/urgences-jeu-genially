<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>INTRO — URGENCES (AAA)</title>

  <!-- Anton -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Anton&display=swap" rel="stylesheet">

  <style>
    :root{
      --txt: rgba(255,255,255,.98);
      --muted: rgba(255,255,255,.72);
      --shadow: rgba(0,0,0,.90);

      --ember: rgba(255,120,60,.95);
      --cyan: rgba(80,170,255,.80);
      --flash: rgba(230,245,255,.95);
    }

    html,body{
      height:100%;
      margin:0;
      background: transparent;
      overflow:hidden;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }

    /* =====================
       SCÈNE
    ====================== */
    .scene{
      position:relative;
      width:100%;
      height:100vh;
      isolation:isolate;
      display:grid;
      place-items:center;
      background: transparent;
    }

    /* ✅ on supprime bg1/bg2 */
    .bg1, .bg2, .fgWrap{ display:none !important; }

    .grade{
      position:absolute; inset:0; z-index:-6;
      background:
        radial-gradient(1000px 520px at 18% 28%, rgba(255,120,60,.24), transparent 60%),
        radial-gradient(1000px 520px at 85% 62%, rgba(80,170,255,.20), transparent 65%),
        linear-gradient(180deg, rgba(0,0,0,.12), rgba(0,0,0,.86));
      opacity:.55;
      pointer-events:none;
    }

    .vignette{
      position:absolute; inset:0; z-index:-5;
      background: radial-gradient(1400px 900px at 50% 38%, transparent 28%, rgba(0,0,0,.92) 92%);
      opacity:.55;
      pointer-events:none;
    }

    /* =====================
       FX (inchangés)
    ====================== */
    .glow{
      position:absolute; inset:0; z-index:0; pointer-events:none;
      background:
        radial-gradient(760px 320px at 16% 72%, rgba(255,90,60,.28), transparent 70%),
        radial-gradient(880px 360px at 88% 64%, rgba(80,170,255,.24), transparent 70%),
        radial-gradient(820px 340px at 55% 84%, rgba(255,220,160,.10), transparent 76%);
      mix-blend-mode: screen;
      opacity:.95;
      animation: glowPulse 2.0s ease-in-out infinite;
    }

    .fog{
      position:absolute; inset:-10%; z-index:1; pointer-events:none;
      background:
        radial-gradient(720px 320px at 30% 78%, rgba(255,255,255,.10), transparent 72%),
        radial-gradient(900px 360px at 65% 80%, rgba(255,255,255,.08), transparent 76%);
      filter: blur(10px);
      opacity:.55;
      animation: fogMove 7.5s ease-in-out infinite;
    }

    .lightning{
      position:absolute; inset:-10%;
      z-index: 4; pointer-events:none;
      opacity:0;
      background:
        radial-gradient(900px 380px at 60% 14%, rgba(230,245,255,.60), transparent 72%),
        radial-gradient(1400px 560px at 50% 18%, rgba(230,245,255,.28), transparent 80%),
        linear-gradient(180deg, rgba(230,245,255,.12), transparent);
      mix-blend-mode: screen;
      filter: blur(0px);
    }
    .lightning.flash1{ animation: lightning1 6.2s infinite; }
    .lightning.flash2{ animation: lightning2 8.8s infinite; }

    .grain{
      position:absolute; inset:-35%;
      z-index:-4; pointer-events:none;
      opacity:.20;
      mix-blend-mode: overlay;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='140' height='140'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.85' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='140' height='140' filter='url(%23n)' opacity='.35'/%3E%3C/svg%3E");
      animation: grain 2.2s steps(2) infinite;
    }

    .thunderWave{
      position:absolute;
      left:50%;
      top: 22%;
      transform: translateX(-50%);
      width: min(920px, 96%);
      height: 140px;
      z-index: 1;
      pointer-events:none;
      opacity: 0;
      background:
        radial-gradient(420px 120px at 50% 50%, rgba(230,245,255,.22), transparent 70%),
        radial-gradient(720px 160px at 50% 52%, rgba(255,255,255,.10), transparent 75%);
      filter: blur(2px);
      mix-blend-mode: screen;
      animation: thunderWave 6.2s infinite;
    }

    .thunderFlash{
      position:absolute;
      inset:-5%;
      z-index: 6;
      pointer-events:none;
      opacity:0;
      background:
        radial-gradient(1100px 520px at 55% 12%, rgba(230,245,255,.85), transparent 70%),
        radial-gradient(1600px 720px at 50% 15%, rgba(230,245,255,.25), transparent 80%),
        linear-gradient(180deg, rgba(230,245,255,.14), transparent 60%);
      mix-blend-mode: screen;
      animation: thunderFlash 6.2s infinite;
    }

    /* =====================
       ✅ FEU (ajout)
    ====================== */
    .fireGlow{
      position:absolute;
      inset:-10%;
      z-index:2;
      pointer-events:none;
      mix-blend-mode: screen;
      opacity:.75;
      background:
        radial-gradient(680px 240px at 50% 100%, rgba(255,120,60,.35), transparent 70%),
        radial-gradient(900px 320px at 20% 105%, rgba(255,200,80,.16), transparent 72%),
        radial-gradient(900px 320px at 80% 105%, rgba(255,80,80,.12), transparent 72%);
      filter: blur(10px);
      animation: fireGlow 2.6s ease-in-out infinite;
    }

    .embers{
      position:absolute;
      inset:0;
      z-index:3;
      pointer-events:none;
      opacity:.65;
      background:
        radial-gradient(2px 2px at 10% 92%, rgba(255,210,120,.95), transparent 60%),
        radial-gradient(2px 2px at 18% 96%, rgba(255,140,80,.90), transparent 60%),
        radial-gradient(2px 2px at 26% 94%, rgba(255,220,160,.92), transparent 60%),
        radial-gradient(2px 2px at 35% 98%, rgba(255,120,60,.88), transparent 60%),
        radial-gradient(2px 2px at 44% 93%, rgba(255,210,120,.92), transparent 60%),
        radial-gradient(2px 2px at 55% 97%, rgba(255,160,90,.90), transparent 60%),
        radial-gradient(2px 2px at 63% 95%, rgba(255,230,180,.90), transparent 60%),
        radial-gradient(2px 2px at 72% 98%, rgba(255,120,60,.88), transparent 60%),
        radial-gradient(2px 2px at 84% 94%, rgba(255,210,120,.92), transparent 60%),
        radial-gradient(2px 2px at 92% 97%, rgba(255,150,80,.90), transparent 60%);
      filter: blur(.2px);
      animation: embersRise 3.6s linear infinite;
    }

    /* =====================
       MISSION FIXE EN HAUT
    ====================== */
    .missionPill{
      position: fixed;
      top: 14px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 999;
      pointer-events:none;

      display:inline-block;
      padding:7px 14px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.18);
      background: rgba(0,0,0,.34);
      backdrop-filter: blur(10px);
      box-shadow: 0 18px 60px rgba(0,0,0,.55);

      font-weight:950;
      font-size:12px;
      letter-spacing:.16em;
      text-transform:uppercase;
      color: rgba(255,255,255,.78);
    }

    /* =====================
       TITRES + entrée (sécurisée)
    ====================== */
    .titleWrap{
      position: fixed;
      left:50%;
      transform: translateX(-50%);
      bottom: 180px;
      z-index: 8;
      width: min(980px, 92%);
      text-align:center;
      pointer-events:none;
    }

    /* ✅ IMPORTANT: visibles même si l’animation est bloquée */
    .title{
      margin: 0;
      font-family:'Anton', sans-serif;
      font-weight: 500;
      text-transform:uppercase;
      line-height: .90;
      letter-spacing: .016em;
      font-size: 120px;

      opacity:1;
      transform:none;
      filter:none;

      text-shadow:
        0 34px 110px rgba(0,0,0,.90),
        0 0 55px rgba(255,120,60,.28),
        0 0 55px rgba(80,170,255,.20);

      /* ✅ entrée (ne casse pas l’affichage si bloquée) */
      animation: titleEnter 1.05s cubic-bezier(.12,.98,.18,1) .25s both;
      will-change: transform, opacity, filter;
    }

    .title span{
      display:block;
      background: linear-gradient(90deg, #fff2dc, #ff9a55, #7ec7ff, #fff2dc);
      background-size:260% 100%;
      -webkit-background-clip:text;
      background-clip:text;
      color:transparent;

      animation:
        shine 2.2s ease .65s forwards,
        heatWobble 2.6s ease-in-out 1.1s infinite;
    }

    .subtitleBig{
      margin-top: 8px;
      font-family:'Anton', sans-serif;
      font-size: 110px;
      color:#fff;
      line-height: .90;
      letter-spacing: .010em;
      text-shadow: 0 28px 90px rgba(0,0,0,.86);

      opacity:1;
      transform:none;
      filter:none;

      animation: subtitleEnter .9s cubic-bezier(.12,.98,.18,1) .48s both;
      will-change: transform, opacity, filter;
    }

    /* =====================
       BOUTON START (fixe)
    ====================== */
    .startBtn{
      position: fixed;
      bottom: 90px;
      left:50%;
      transform:translateX(-50%);
      z-index:10;

      padding:14px 20px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.22);
      background: rgba(0,0,0,.45);
      color:#fff;

      font-weight:50;
      letter-spacing:.18em;
      text-transform:uppercase;
      font-size:11px;

      backdrop-filter: blur(8px);
      box-shadow: 0 20px 60px rgba(0,0,0,.55);
      cursor:pointer;
      transition: transform .15s ease, box-shadow .15s ease, filter .15s ease;
    }
    .startBtn:hover{
      transform: translateX(-50%) scale(1.05);
      box-shadow: 0 30px 80px rgba(0,0,0,.75);
      filter: brightness(1.05);
    }

    /* =====================
       SLOGAN (fixe bas)
    ====================== */
    .slogan{
      position: fixed;
      bottom:18px;
      left:50%;
      transform:translateX(-50%);
      z-index:10;
      width:min(980px,92%);
      text-align:center;

      font-size:12px;
      font-weight:900;
      letter-spacing:.12em;
      text-transform:uppercase;
      color:rgba(255,255,255,.86);

      padding:10px 14px;
      border-radius:999px;
      background: rgba(0,0,0,.26);
      border:1px solid rgba(255,255,255,.14);
      backdrop-filter: blur(8px);
      box-shadow: 0 20px 60px rgba(0,0,0,.45);

      opacity:1;
      pointer-events:none;
    }

    /* =====================
       CUT (inchangé)
    ====================== */
    .cut{
      position:absolute; inset:0;
      background:#000;
      opacity:0;
      z-index:50;
      transition: opacity 900ms ease;
      pointer-events:none;
    }
    .cut.on{ opacity:1; }

    .cutText{
      position:absolute;
      top:50%;
      left:50%;
      transform:translate(-50%,-50%);
      font-family:'Anton', sans-serif;
      letter-spacing:.08em;
      text-transform:uppercase;
      color:#fff;
      opacity:0;
      transition: opacity 600ms ease;
      text-shadow: 0 20px 60px rgba(0,0,0,.9);
      white-space: nowrap;
    }
    .cut.on .cutText{ opacity:1; }

    .cutHint{
      position:absolute;
      top:50%;
      left:50%;
      transform:translate(-50%,-50%);
      width:min(520px, 92%);
      text-align:center;
      opacity:0;
      pointer-events:none;
      transition: opacity 450ms ease;
    }
    .cut.showHint .cutHint{
      opacity:1;
      pointer-events:auto;
    }
    .hintTitle{
      font-family:'Anton', sans-serif;
      letter-spacing:.06em;
      text-transform:uppercase;
      color:#fff;
      font-size:34px;
      text-shadow: 0 22px 70px rgba(0,0,0,.92);
      margin-bottom:14px;
    }
    .hintBtn{
      display:inline-block;
      padding:14px 22px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.22);
      background: rgba(255,255,255,.10);
      color:#fff;
      font-weight:900;
      letter-spacing:.14em;
      text-transform:uppercase;
      font-size:12px;
      cursor:pointer;
      backdrop-filter: blur(10px);
      box-shadow: 0 18px 60px rgba(0,0,0,.60);
      transition: transform .15s ease, filter .15s ease;
    }
    .hintBtn:hover{ transform: scale(1.05); filter: brightness(1.08); }

    /* =====================
       ANIMS
    ====================== */
    @keyframes shine{ to{ background-position:100% 0 } }
    @keyframes glowPulse{ 0%,100%{opacity:.78} 50%{opacity:1} }
    @keyframes fogMove{ 0%,100%{transform:translateX(-1%)} 50%{transform:translateX(2%)} }
    @keyframes grain{
      0%{ transform: translate(0,0); }
      25%{ transform: translate(-2%,1%); }
      50%{ transform: translate(1%,-2%); }
      75%{ transform: translate(-1%,-1%); }
      100%{ transform: translate(0,0); }
    }
    @keyframes lightning1{ 0%,78%{opacity:0} 80%{opacity:.95} 83%{opacity:.10} 86%{opacity:.65} 100%{opacity:0} }
    @keyframes lightning2{ 0%,64%{opacity:0} 66%{opacity:.90} 69%{opacity:.12} 72%{opacity:.62} 100%{opacity:0} }
    @keyframes thunderWave{
      0%,78%{ opacity:0; transform: translateX(-50%) scale(.92); }
      80%{ opacity:.85; transform: translateX(-50%) scale(1.02); }
      83%{ opacity:.12; transform: translateX(-50%) scale(.98); }
      86%{ opacity:.55; transform: translateX(-50%) scale(1.03); }
      100%{ opacity:0; transform: translateX(-50%) scale(1.00); }
    }
    @keyframes thunderFlash{ 0%,78%{ opacity:0; } 80%{ opacity:.92; } 82%{ opacity:.10; } 85%{ opacity:.68; } 100%{ opacity:0; } }

    @keyframes titleEnter{
      from{ opacity:0; transform: translateY(34px) scale(.96); filter: blur(12px); }
      to{ opacity:1; transform: translateY(0) scale(1); filter: blur(0px); }
    }
    @keyframes subtitleEnter{
      from{ opacity:0; transform: translateY(22px); filter: blur(10px); }
      to{ opacity:1; transform: translateY(0); filter: blur(0px); }
    }
    @keyframes fireGlow{ 0%,100%{ opacity:.55; transform: translateY(0);} 50%{ opacity:.95; transform: translateY(-6px);} }
    @keyframes embersRise{ 0%{ transform: translateY(12px); opacity:.20; } 30%{ opacity:.70; } 100%{ transform: translateY(-140px); opacity:0; } }
    @keyframes heatWobble{ 0%,100%{ transform: translateY(0);} 50%{ transform: translateY(-1px);} }

    @media (max-width: 720px){
      .missionPill{ top: 10px; font-size:11px; padding:6px 12px; }
      .title{ font-size: 64px; }
      .subtitleBig{ font-size: 46px; }
      .startBtn{ bottom: 170px; }
      .titleWrap{ bottom: 78px; }
    }

    @media (prefers-reduced-motion: reduce){
      .glow,.fog,.lightning,.thunderWave,.thunderFlash,.grain,.fireGlow,.embers,
      .title,.subtitleBig,.title span{ animation:none !important; }
    }
  </style>
</head>

<body>
<main class="scene">

  <div class="missionPill">MISSION • PREMIERS SECOURS</div>

  <div class="grade" aria-hidden="true"></div>
  <div class="vignette" aria-hidden="true"></div>

  <div class="glow" aria-hidden="true"></div>
  <div class="fog" aria-hidden="true"></div>
  <div class="lightning flash1" aria-hidden="true"></div>
  <div class="lightning flash2" aria-hidden="true"></div>
  <div class="thunderWave" aria-hidden="true"></div>
  <div class="thunderFlash" aria-hidden="true"></div>
  <div class="grain" aria-hidden="true"></div>

  <!-- ✅ FEU -->
  <div class="fireGlow" aria-hidden="true"></div>
  <div class="embers" aria-hidden="true"></div>

  <section class="titleWrap" aria-label="Introduction du jeu">
    <h1 class="title"><span>URGENCES</span></h1>
    <div class="subtitleBig">AGIR POUR SAUVER</div>
  </section>

  <button class="startBtn" id="startBtn">COMMENCER LA MISSION</button>

  <div class="slogan">CHAQUE SECONDE COMPTE — CHOISIS. AGIS. SAUVE.</div>

  <div class="cut" id="cut">
    <div class="cutText" id="cutText">MISSION EN COURS…</div>
    <div class="cutHint" id="cutHint">
      <div class="hintTitle">PRÊT(E) ?</div>
      <button class="hintBtn" id="continueBtn">CLIQUER ICI</button>
    </div>
  </div>

</main>

<script>
  const startBtn = document.getElementById("startBtn");
  const cut = document.getElementById("cut");
  const cutText = document.getElementById("cutText");
  const continueBtn = document.getElementById("continueBtn");

  startBtn.addEventListener("click", ()=>{
    cut.classList.add("on");
    setTimeout(()=>{
      cutText.style.opacity = "0";
      cutText.style.pointerEvents = "none";
      cut.classList.add("showHint");
    }, 300);
  });

  continueBtn.addEventListener("click", ()=>{});
</script>

<script>
  (function resetGameIfNewRun(){
    const keys = ["player_name","playerName","role","avatar","niveau","score","tentatives","badges"];
    keys.forEach(k => localStorage.removeItem(k));
    keys.forEach(k => sessionStorage.removeItem(k));
  })();
</script>

</body>
</html>
