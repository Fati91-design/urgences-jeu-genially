<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>INTRO — URGENCES (AAA)</title>

  <!-- Anton -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Anton&display=swap" rel="stylesheet">

  <style>
    :root{
      --txt: rgba(255,255,255,.98);
      --muted: rgba(255,255,255,.72);
      --shadow: rgba(0,0,0,.90);

      --ember: rgba(255,120,60,.95);
      --cyan: rgba(80,170,255,.80);
      --flash: rgba(230,245,255,.95);
    }

    html,body{
      height:100%;
      margin:0;
      background: transparent;
      overflow:hidden;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }

    /* =====================
       SCÈNE
    ====================== */
    .scene{
      position:relative;
      width:100%;
      height:100vh;
      isolation:isolate;
      display:grid;
      place-items:center;
    }

    .bg1, .bg2{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      object-fit: cover;
      pointer-events:none;
      user-select:none;
      -webkit-user-drag:none;
    }

    .bg1{
      z-index:-7;
      transform: scale(1.10);
      filter: contrast(1.10) saturate(1.08);
    }

    .bg2{
      z-index: 3;
      object-position: center 70%;
      filter: drop-shadow(0 34px 90px rgba(0,0,0,.62));
      animation: fgBreath 3.2s ease-in-out infinite;
    }

    .grade{
      position:absolute; inset:0; z-index:-6;
      background:
        radial-gradient(1000px 520px at 18% 28%, rgba(255,120,60,.24), transparent 60%),
        radial-gradient(1000px 520px at 85% 62%, rgba(80,170,255,.20), transparent 65%),
        linear-gradient(180deg, rgba(0,0,0,.12), rgba(0,0,0,.86));
    }

    .vignette{
      position:absolute; inset:0; z-index:-5;
      background: radial-gradient(1400px 900px at 50% 38%, transparent 28%, rgba(0,0,0,.92) 92%);
    }

    /* =====================
       FX : LUMIÈRES + TONNERRE VISUEL (FLASH)
    ====================== */
    .glow{
      position:absolute; inset:0; z-index:0; pointer-events:none;
      background:
        radial-gradient(760px 320px at 16% 72%, rgba(255,90,60,.28), transparent 70%),
        radial-gradient(880px 360px at 88% 64%, rgba(80,170,255,.24), transparent 70%),
        radial-gradient(820px 340px at 55% 84%, rgba(255,220,160,.10), transparent 76%);
      mix-blend-mode: screen;
      opacity:.95;
      animation: glowPulse 2.0s ease-in-out infinite;
    }

    .fog{
      position:absolute; inset:-10%; z-index:1; pointer-events:none;
      background:
        radial-gradient(720px 320px at 30% 78%, rgba(255,255,255,.10), transparent 72%),
        radial-gradient(900px 360px at 65% 80%, rgba(255,255,255,.08), transparent 76%);
      filter: blur(10px);
      opacity:.55;
      animation: fogMove 7.5s ease-in-out infinite;
    }

    /* Éclair (flash visuel) */
    .lightning{
      position:absolute; inset:-10%;
      z-index: 4; pointer-events:none;
      opacity:0;
      background:
        radial-gradient(900px 380px at 60% 14%, rgba(230,245,255,.60), transparent 72%),
        radial-gradient(1400px 560px at 50% 18%, rgba(230,245,255,.28), transparent 80%),
        linear-gradient(180deg, rgba(230,245,255,.12), transparent);
      mix-blend-mode: screen;
      filter: blur(0px);
    }
    .lightning.flash1{ animation: lightning1 6.2s infinite; }
    .lightning.flash2{ animation: lightning2 8.8s infinite; }

    /* Film grain */
    .grain{
      position:absolute; inset:-35%;
      z-index:-4; pointer-events:none;
      opacity:.20;
      mix-blend-mode: overlay;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='140' height='140'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.85' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='140' height='140' filter='url(%23n)' opacity='.35'/%3E%3C/svg%3E");
      animation: grain 2.2s steps(2) infinite;
    }

    /* “Onde de tonnerre” visuelle */
    .thunderWave{
      position:absolute;
      left:50%;
      top: 22%;
      transform: translateX(-50%);
      width: min(920px, 96%);
      height: 140px;
      z-index: 1;
      pointer-events:none;
      opacity: 0;
      background:
        radial-gradient(420px 120px at 50% 50%, rgba(230,245,255,.22), transparent 70%),
        radial-gradient(720px 160px at 50% 52%, rgba(255,255,255,.10), transparent 75%);
      filter: blur(2px);
      mix-blend-mode: screen;
      animation: thunderWave 6.2s infinite;
    }

    /* ✅ AJOUT: “Coup de tonnerre” plus fort (flash + ombre) */
    .thunderFlash{
      position:absolute;
      inset:-5%;
      z-index: 6;
      pointer-events:none;
      opacity:0;
      background:
        radial-gradient(1100px 520px at 55% 12%, rgba(230,245,255,.85), transparent 70%),
        radial-gradient(1600px 720px at 50% 15%, rgba(230,245,255,.25), transparent 80%),
        linear-gradient(180deg, rgba(230,245,255,.14), transparent 60%);
      mix-blend-mode: screen;
      animation: thunderFlash 6.2s infinite;
    }

    /* =====================
       TITRES (rapprochés)
    ====================== */
    .titleWrap{
      position:absolute;
      top: 7%;
      left:50%;
      transform: translateX(-50%);
      z-index: 2;
      width: min(980px, 92%);
      text-align:center;
      pointer-events:none;
    }

    .kicker{
      display:inline-block;
      padding:6px 12px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.18);
      background: rgba(0,0,0,.28);
      font-weight:950;
      font-size:12px;
      letter-spacing:.16em;
      text-transform:uppercase;
      color:var(--muted);
      opacity:0;
      animation: fadeIn .85s ease .18s forwards;
      backdrop-filter: blur(6px);
      margin-bottom: 4px;
    }

    .title{
      margin: 10px 0 0;
      font-family:'Anton', sans-serif;
      font-weight: 400;
      text-transform:uppercase;
      line-height: .90;
      letter-spacing: .016em;
      font-size: 120px;

      opacity:0;
      transform: translateY(190px);
      filter: blur(12px);

      text-shadow:
        0 34px 110px var(--shadow),
        0 0 55px rgba(255,120,60,.28),
        0 0 55px rgba(80,170,255,.20);

      animation: riseImpact 1.45s cubic-bezier(.12,.98,.18,1) .55s forwards;
      will-change: transform, opacity, filter;
      backface-visibility:hidden;
    }

    .title span{
      display:block;
      background: linear-gradient(90deg, #fff2dc, #ff9a55, #7ec7ff, #fff2dc);
      background-size:260% 100%;
      -webkit-background-clip:text;
      background-clip:text;
      color:transparent;
      animation: shine 1.7s ease 1.05s forwards;
    }

    .subtitleBig{
      margin-top: 10px;
      font-family:'Anton', sans-serif;
      font-size: 120px;
      color:#fff;
      line-height: .90;
      letter-spacing: .010em;
      text-shadow: 0 28px 90px rgba(0,0,0,.86);
      opacity:0;
      animation: fadeUp .9s ease 1.08s forwards;
    }

    /* =====================
       BOUTON START
    ====================== */
    .startBtn{
      position:absolute;
      bottom:70px;
      left:50%;
      transform:translateX(-50%);
      z-index:10;

      padding:14px 20px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.22);
      background: rgba(0,0,0,.45);
      color:#fff;

      font-weight:50;
      letter-spacing:.18em;
      text-transform:uppercase;
      font-size:11px;

      backdrop-filter: blur(8px);
      box-shadow: 0 20px 60px rgba(0,0,0,.55);
      cursor:pointer;
      transition: transform .15s ease, box-shadow .15s ease, filter .15s ease;
    }
    .startBtn:hover{
      transform: translateX(-50%) scale(1.05);
      box-shadow: 0 30px 80px rgba(0,0,0,.75);
      filter: brightness(1.05);
    }

    /* =====================
       SLOGAN (bas)
    ====================== */
    .slogan{
      position:absolute;
      bottom:18px;
      left:50%;
      transform:translateX(-50%);
      z-index:10;
      width:min(980px,92%);
      text-align:center;

      font-size:12px;
      font-weight:900;
      letter-spacing:.12em;
      text-transform:uppercase;
      color:rgba(255,255,255,.86);

      padding:10px 14px;
      border-radius:999px;
      background: rgba(0,0,0,.26);
      border:1px solid rgba(255,255,255,.14);
      backdrop-filter: blur(8px);
      box-shadow: 0 20px 60px rgba(0,0,0,.45);

      opacity:0;
      animation: fadeIn 1s ease 1.35s forwards;
      pointer-events:none;
    }

    /* =====================
       CUT TO BLACK (clic uniquement)
    ====================== */
    .cut{
      position:absolute; inset:0;
      background:#000;
      opacity:0;
      z-index:50;
      transition: opacity 900ms ease;
      pointer-events:none;
    }
    .cut.on{ opacity:1; }

    .cutText{
      position:absolute;
      top:50%;
      left:50%;
      transform:translate(-50%,-50%);
      font-family:'Anton', sans-serif;
      letter-spacing:.08em;
      text-transform:uppercase;
      color:#fff;
      opacity:0;
      transition: opacity 600ms ease;
      text-shadow: 0 20px 60px rgba(0,0,0,.9);
      white-space: nowrap;
    }
    .cut.on .cutText{ opacity:1; }

    /* ✅ AJOUT : Écran "Clique ici" après 3s */
    .cutHint{
      position:absolute;
      top:50%;
      left:50%;
      transform:translate(-50%,-50%);
      width:min(520px, 92%);
      text-align:center;
      opacity:0;
      pointer-events:none;
      transition: opacity 450ms ease;
    }
    .cut.showHint .cutHint{
      opacity:1;
      pointer-events:auto;
    }
    .hintTitle{
      font-family:'Anton', sans-serif;
      letter-spacing:.06em;
      text-transform:uppercase;
      color:#fff;
      font-size:34px;
      text-shadow: 0 22px 70px rgba(0,0,0,.92);
      margin-bottom:14px;
    }
    .hintBtn{
      display:inline-block;
      padding:14px 22px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.22);
      background: rgba(255,255,255,.10);
      color:#fff;
      font-weight:900;
      letter-spacing:.14em;
      text-transform:uppercase;
      font-size:12px;
      cursor:pointer;
      backdrop-filter: blur(10px);
      box-shadow: 0 18px 60px rgba(0,0,0,.60);
      transition: transform .15s ease, filter .15s ease;
    }
    .hintBtn:hover{ transform: scale(1.05); filter: brightness(1.08); }

    /* =====================
       ANIMS
    ====================== */
    @keyframes riseImpact{
      0%{opacity:0; transform:translateY(200px); filter:blur(12px);}
      70%{opacity:1; transform:translateY(-10px); filter:blur(0);}
      100%{opacity:1; transform:translateY(0); filter:blur(0);}
    }
    @keyframes fadeIn{to{opacity:1}}
    @keyframes fadeUp{to{opacity:1}}
    @keyframes shine{to{background-position:100% 0}}
    @keyframes fgBreath{
      0%,100%{transform:translateY(8px)}
      50%{transform:translateY(4px)}
    }
    @keyframes glowPulse{
      0%,100%{opacity:.78}
      50%{opacity:1}
    }
    @keyframes fogMove{
      0%,100%{transform:translateX(-1%)}
      50%{transform:translateX(2%)}
    }
    @keyframes grain{
      0%{ transform: translate(0,0); }
      25%{ transform: translate(-2%,1%); }
      50%{ transform: translate(1%,-2%); }
      75%{ transform: translate(-1%,-1%); }
      100%{ transform: translate(0,0); }
    }
    @keyframes lightning1{
      0%,78%{opacity:0}
      80%{opacity:.95}
      83%{opacity:.10}
      86%{opacity:.65}
      100%{opacity:0}
    }
    @keyframes lightning2{
      0%,64%{opacity:0}
      66%{opacity:.90}
      69%{opacity:.12}
      72%{opacity:.62}
      100%{opacity:0}
    }
    @keyframes thunderWave{
      0%,78%{ opacity:0; transform: translateX(-50%) scale(.92); }
      80%{ opacity:.85; transform: translateX(-50%) scale(1.02); }
      83%{ opacity:.12; transform: translateX(-50%) scale(.98); }
      86%{ opacity:.55; transform: translateX(-50%) scale(1.03); }
      100%{ opacity:0; transform: translateX(-50%) scale(1.00); }
    }
    @keyframes thunderFlash{
      0%,78%{ opacity:0; }
      80%{ opacity:.92; }
      82%{ opacity:.10; }
      85%{ opacity:.68; }
      100%{ opacity:0; }
    }

    @media (prefers-reduced-motion: reduce){
      .bg2,.grain,.glow,.fog,.lightning,.thunderWave,.thunderFlash,.title,.kicker,.subtitleBig,.slogan{
        animation:none !important;
      }
      .title,.kicker,.subtitleBig,.slogan{
        opacity:1 !important; transform:none !important; filter:none !important;
      }
    }
  </style>
</head>

<body>
<main class="scene">

  <img class="bg1" src="assets/bg1.png" alt="" aria-hidden="true">
  <div class="grade" aria-hidden="true"></div>
  <div class="vignette" aria-hidden="true"></div>

  <!-- FX -->
  <div class="glow" aria-hidden="true"></div>
  <div class="fog" aria-hidden="true"></div>
  <div class="lightning flash1" aria-hidden="true"></div>
  <div class="lightning flash2" aria-hidden="true"></div>
  <div class="thunderWave" aria-hidden="true"></div>
  <div class="thunderFlash" aria-hidden="true"></div>
  <div class="grain" aria-hidden="true"></div>

  <section class="titleWrap" aria-label="Introduction du jeu">
    <div class="kicker">MISSION • PREMIERS SECOURS</div>
    <h1 class="title"><span>URGENCES</span></h1>
    <div class="subtitleBig">AGIR POUR SAUVER</div>
  </section>

  <img class="bg2" src="assets/bg2.png" alt="" aria-hidden="true">

  <!-- Start -->
  <button class="startBtn" id="startBtn">COMMENCER LA MISSION</button>

  <!-- Slogan -->
  <div class="slogan">CHAQUE SECONDE COMPTE — CHOISIS. AGIS. SAUVE.</div>

  <!-- Cut -->
  <div class="cut" id="cut">
    <div class="cutText" id="cutText">MISSION EN COURS…</div>

    <!-- ✅ AJOUT: message + bouton "cliquer ici" -->
    <div class="cutHint" id="cutHint">
      <div class="hintTitle">PRÊT(E) ?</div>
      <button class="hintBtn" id="continueBtn">CLIQUER ICI</button>
    </div>
  </div>

</main>

<script>
  const startBtn = document.getElementById("startBtn");
  const cut = document.getElementById("cut");
  const cutText = document.getElementById("cutText");
  const continueBtn = document.getElementById("continueBtn");

  startBtn.addEventListener("click", ()=>{
    cut.classList.add("on");

    // ✅ après 3s : cacher "MISSION EN COURS…" et afficher le bouton
    setTimeout(()=>{
      cutText.style.opacity = "0";
      cutText.style.pointerEvents = "none";

      cut.classList.add("showHint");
    }, 3000);
  });

  // Action au clic (tu mets dessus l'interactivité Genially ou redirection)
  continueBtn.addEventListener("click", ()=>{
    // Option : redirection (si tu veux)
    // window.location.href = "index.html";

    // Sinon : laisse Genially gérer le "slide suivant" via un hotspot au-dessus
  });
</script>

  <script>
  // À mettre sur la toute première page (Accueil) du jeu
  (function resetGameIfNewRun(){
    // ✅ liste des clés que TU utilises
    const keys = [
      "player_name",
      "playerName",
      "role",
      "avatar",
      "niveau",
      "score",
      "tentatives",
      "badges"
    ];

    // ✅ reset à chaque fois qu'on revient au début du jeu
    keys.forEach(k => localStorage.removeItem(k));
    // si tu utilises sessionStorage aussi :
    keys.forEach(k => sessionStorage.removeItem(k));
  })();
</script>

</body>
</html>
